<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Nice Postman Codegen</title>
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@1.*/css/pico.min.css">

</head>

<body>
    <script src="index.js"></script>
    <main class="container">
        <hgroup>
            <h2>Nice Postman Codegen</h2>
            <h3>Function test UI</h3>
        </hgroup>

        <!-- Grid -->
        <div class="grid">

            <!-- Markup example 1: input is inside label -->
            <label for="input">
                Input PM Request blob
                <!-- <textarea id="inputfield" rows="10">{"description":{"content":"The HTTP `POST` request method is meant to transfer data to a server \n(and elicit a response). What data is returned depends on the implementation\nof the server.\n\nA `POST` request can pass parameters to the server using \"Query String \nParameters\", as well as the Request Body. For example, in the following request,\n\n> POST /hi/there?hand=wave\n>\n> <request-body>\n\nThe parameter \"hand\" has the value \"wave\". The request body can be in multiple\nformats. These formats are defined by the MIME type of the request. The MIME \nType can be set using the ``Content-Type`` HTTP header. The most commonly used \nMIME types are:\n\n* `multipart/form-data`\n* `application/x-www-form-urlencoded`\n* `application/json`\n\nThis endpoint echoes the HTTP headers, request parameters, the contents of\nthe request body and the complete URI requested.","type":"text/plain"},"url":{"protocol":"https","path":["post"],"host":["postman-echo","com"],"query":[],"variable":[]},"method":"POST","body":{"mode":"raw","raw":"This is expected to be sent back as part of response body."}} -->
                <textarea id="inputfield" rows="10">{"description":{"content":"This endpoint simulates a **basic-auth** protected endpoint. \nThe endpoint accepts a default username and password and returns a status code of `200 ok` only if the same is provided. \nOtherwise it will return a status code `401 unauthorized`.\n\n> Username: `postman`\n> \n> Password: `password`\n\nTo use this endpoint, send a request with the header `Authorization: Basic cG9zdG1hbjpwYXNzd29yZA==`. \nThe cryptic latter half of the header value is a base64 encoded concatenation of the default username and password. \nUsing Postman, to send this request, you can simply fill in the username and password in the \"Authorization\" tab and Postman will do the rest for you.\n\nTo know more about basic authentication, refer to the [Basic Access Authentication](https://en.wikipedia.org/wiki/Basic_access_authentication) wikipedia article.\nThe article on [authentication helpers](https://www.getpostman.com/docs/helpers#basic-auth?source=echo-collection-app-onboarding) elaborates how to use the same within the Postman app.","type":"text/plain"},"url":{"protocol":"https","path":["basic-auth"],"host":["postman-echo","com"],"query":[],"variable":[]},"method":"GET","body":{},"auth":{"type":"basic","basic":[{"type":"any","value":"postman","key":"username"},{"type":"any","value":"password","key":"password"},{"type":"any","key":"saveHelperData"},{"type":"any","value":false,"key":"showPassword"}]}}
                </textarea>
            </label>

            <label for="output">
                Studio Snippet Code
                <textarea id="outputfield" rows="10">The cat was playing in the garden.</textarea>
            </label>

        </div>

        <!-- Button -->
        <div class="grid">
            <button type="submit" id="submit">Submit</button>
            <button type="copy" id="copy">Copy Output</button>
            <button type="reset" id="reset">Reset</button>
        </div>
    </main>

</body>
<script>
    let inputfield = document.querySelector("#inputfield")
    let outputfield = document.querySelector("#outputfield")
    let submitbtn = document.querySelector("#submit")
    let copybtn = document.querySelector("#copy")
    let resetbtn = document.querySelector("#reset")

    // Events
    submitbtn.onclick = mainFunction
    copybtn.onclick = copyOutput
    window.onload = mainFunction
    
    function mainFunction() {
        writeLog()
        // console.log(inputfield.value)
        outputfield.textContent = generateSnippet(inputfield.value)
    };

    function copyOutput() {
        // https://www.w3schools.com/howto/howto_js_copy_clipboard.asp
        outputfield.select()
        navigator.clipboard.writeText(outputfield.value);
        console.log("Copy to clipboard")
    }
</script>


</html>